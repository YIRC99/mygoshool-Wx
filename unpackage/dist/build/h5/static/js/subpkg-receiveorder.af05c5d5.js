(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["subpkg-receiveorder"],{"0a11":function(e,t,i){"use strict";var r=i("4ea4");i("4de4"),i("4160"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(i("e34b")),n={data:function(){return{isLoading:!1,appriseText:"",list:[{name:"拼车"},{name:"待开发"}],current:0,orderList:[],popupShow:!1,userinfo:{},currentOrder:{createUserInfo:{username:"",userphone:"",userwx:""},status:0,phonenumber:"",wechataccount:"",orderid:"",receiveUserWechatImg:""},clickAppriseReceiveUserId:"",clickCurrentListIndex:"",clickUpApprise:!1}},mixins:[a.default],methods:{getUserReOrder:function(){var e=this;this.post({url:"carshareorder/getreceivebyuserid",data:{openid:this.userinfo.openid}}).then((function(t){console.log(t),200==t.code?(e.orderList=t.data,e.orderList.forEach((function(e){null==e.receiveUserAppriseId?(e.statusText="已接收",e.statusTag="warning"):null!=e.receiveUserAppriseId?(e.statusText="已完成",e.statusTag="success"):3==e.status&&(e.statusText="已过期",e.statusTag="info")}))):e.$refs.message.show({type:"error",msg:"请求错误 请稍候重试吧"})})).catch((function(t){e.$refs.message.show({type:"error",msg:"网络开了点小差,请稍候重试吧"})}))},ToUpdateCarOrder:function(){uni.setStorageSync("updateCarOrderId",this.currentOrder.orderid),uni.navigateTo({url:"/subpkg/updateCarOrder"})},deleteRequest:function(){var e=this;this.isLoading=!0,uni.showLoading({}),this.post({url:"carshareorder/delete",data:{orderid:this.currentOrder.orderid}}).then((function(t){uni.hideLoading(),e.isLoading=!1,console.log(t),200==t.code?(e.$refs.message.show({type:"success",msg:"删除成功"}),e.$refs.popup.close(),setTimeout((function(){e.orderList=e.orderList.filter((function(t){return t.orderid!=e.currentOrder.orderid}))}),500)):e.$refs.message.show({type:"error",msg:"删除失败, 请稍候再试吧"})})).catch((function(t){uni.hideLoading(),e.isLoading=!1,e.$refs.message.show({type:"error",msg:"网络开了点小差,请稍候重试吧"})}))},deleteOrder:function(){var e,t=this,i="提示";e="已接受"==this.currentOrder.statusText?"删除之后,发布者和接受者方都无法查看到数据了,确定删除嘛":"确定删除嘛",uni.showModal({title:i,content:e,success:function(e){console.log(e),e.confirm&&t.deleteRequest()}})},upApprise:function(){var e=this;if(""!=this.appriseText){if(!this.clickUpApprise){this.clickUpApprise=!0,this.isLoading=!0;var t=uni.getStorageSync("user");this.post({url:"apprise/add",data:{createuserid:t.openid,receiveuserid:this.orderList[this.clickCurrentListIndex].createuserid,apprisedata:this.appriseText,type:1,postId:this.orderList[this.clickCurrentListIndex].orderid,OrderCreateUserId:this.orderList[this.clickCurrentListIndex].createuserid}}).then((function(t){if(console.log(t),e.isLoading=!1,200!=t.code)return e.clickUpApprise=!1,void e.$refs.message.show({type:"error",msg:"评价失败, 请稍候再试吧"});e.$refs.message.show({type:"success",msg:"评价成功"}),setTimeout((function(){e.orderList[e.clickCurrentListIndex].status=2,e.orderList[e.clickCurrentListIndex].statusText="已完成",e.orderList[e.clickCurrentListIndex].statusTag="success",e.orderList[e.clickCurrentListIndex].receiveUserAppriseId="defult",e.$refs.appraisePopup.close()}),500)})).catch((function(t){console.log("home page is",t),e.clickUpApprise=!1,e.isRefresh=!1,e.$refs.message.show({type:"error",msg:"网络开了点小差,请稍候重试吧"})}))}}else this.$refs.message.show({type:"warning",msg:"请输入评价后再提交吧"})},emptyApprise:function(){this.clickUpApprise=!1,this.appriseText=""},openAppraise:function(e){this.clickCurrentListIndex=e,this.$refs.appraisePopup.open()},clickReceiveCard:function(){uni.navigateTo({url:"/subpkg/userinfo?userid="+this.currentOrder.createUserInfo.userid})},clickReceiveImg:function(){var e=this.QRttp+this.currentOrder.wechatImg;uni.previewImage({urls:[e]})},clickCard:function(e){this.currentOrder=e,console.log("点击了卡片",this.currentOrder),this.$refs.popup.open(),this.popupShow=!0},change:function(e){this.current=e.index},closePopup:function(){this.popupShow=!1}},onLoad:function(){this.userinfo=uni.getStorageSync("user"),this.userinfo=JSON.parse(this.userinfo),console.log(this.userinfo),this.getUserReOrder()}};t.default=n},"4b31":function(e,t,i){var r=i("ff5c");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=i("4f06").default;a("55e78b6a",r,!0,{sourceMap:!1,shadowMode:!1})},"4f39":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return r}));var r={uvTabs:i("1eaf").default,myEmppty:i("dc07").default,uniCard:i("925e").default,uvTags:i("837b").default,uvPopup:i("25b7").default,uniSection:i("ad0a").default,uvTextarea:i("d355").default,quickMessage:i("752c").default,zeroLoading:i("904f").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"page"},[i("uv-tabs",{attrs:{list:e.list,lineWidth:40,lineHeight:6,current:e.current},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.change.apply(void 0,arguments)}}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0==e.current,expression:"current == 0"}]},[i("myEmppty",{attrs:{isShow:0==e.orderList.length}}),e._l(e.orderList,(function(t,r){return i("uni-card",{key:r,staticClass:"mycard",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.clickCard(t)}}},[i("v-uni-view",{staticClass:"my-uv-tags"},[i("v-uni-view",{staticClass:"mycard-titile"},[e._v(e._s(e.subYear(t.startdatetime)+" 出发"))]),i("uv-tags",{attrs:{text:t.statusText,plain:!0,type:t.statusTag}})],1),i("v-uni-view",{staticClass:"my-car-box"},[i("v-uni-view",{staticClass:"aaa"},[i("v-uni-view",{staticClass:"car-left"},[i("img",{staticClass:"my-icon",attrs:{src:"/static/upCar.png"}}),i("v-uni-text",{staticClass:"uv-line-1",staticStyle:{width:"350rpx"}},[e._v(e._s(t.startaddress))])],1),i("v-uni-view",{staticClass:"car-left"},[i("img",{staticClass:"my-icon",attrs:{src:"/static/downCar.png"}}),i("v-uni-text",{staticClass:"uv-line-1",staticStyle:{width:"350rpx"}},[e._v(e._s(t.endaddress))])],1)],1),i("v-uni-view",{staticClass:"aaa",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.openAppraise(r)}}},[null==t.receiveUserAppriseId&&3!=t.status?i("v-uni-button",{staticClass:"btn-grad"},[e._v("用户评价")]):e._e()],1)],1)],1)}))],2),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1==e.current,expression:"current == 1"}]},[i("myEmppty",{attrs:{isShow:!0,Text:"订单为空"}})],1),i("uv-popup",{ref:"popup",attrs:{mode:"bottom",round:"50rpx"},on:{maskClick:function(t){arguments[0]=t=e.$handleEvent(t),e.closePopup.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"popup-box",style:1==(0==e.currentOrder.status||3==e.currentOrder.status)?"height: 50vh":""},[i("v-uni-scroll-view",{staticStyle:{height:"62vh","background-color":"#ffffff"},attrs:{"scroll-y":"true","show-scrollbar":"true"}},[0!=e.currentOrder.status&&3!=e.currentOrder.status?i("uni-card",{attrs:{isShadow:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickReceiveCard.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"my-tag"},[i("v-uni-text",[e._v("对方信息")])],1),i("v-uni-view",{staticClass:"top-box"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{attrs:{src:e.avahttp+e.currentOrder.createUserInfo.avatar,mode:""}})],1),i("v-uni-view",{staticClass:"middle"},[i("v-uni-view",{staticStyle:{"line-height":"50rpx"}},[e._v("用户名称: "+e._s(e.currentOrder.createUserInfo.username))]),i("v-uni-view",{staticStyle:{"line-height":"50rpx",display:"flex","align-items":"center"}},[i("v-uni-view",{staticStyle:{"margin-right":"20rpx"}},[e._v("微信二维码图片")])],1)],1),i("v-uni-view",{staticClass:"right",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.clickReceiveImg.apply(void 0,arguments)}}},[i("v-uni-image",{staticStyle:{width:"100rpx",height:"100rpx",border:"1px solid #ebebeb"},attrs:{src:e.QRttp+e.currentOrder.wechatImg,"show-menu-by-longpress":!0,mode:""}})],1)],1)],1):e._e(),i("v-uni-view",{staticClass:"my-middle-box"},[i("uni-section",{attrs:{title:"出发地点",type:"line",titleFontSize:"36rpx"},scopedSlots:e._u([""!=e.currentOrder.startdatetime?{key:"right",fn:function(){return[e._v("出发时间 "+e._s(e._f("fromStartDateTime")(e.currentOrder.startdatetime)))]},proxy:!0}:null],null,!0)}),i("v-uni-view",{staticClass:"my-text-box"},[e._v(e._s(e.currentOrder.startaddressall))]),i("uni-section",{attrs:{title:"目标地点",type:"line",titleFontSize:"36rpx"}}),i("v-uni-view",{staticClass:"my-text-box"},[e._v(e._s(e.currentOrder.endaddressall))]),i("v-uni-view",{staticClass:"my-text-box2"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-view",{},[e._v("当前人数:"),i("v-uni-text",{staticClass:"my-text-box2-t"},[e._v(e._s(e.currentOrder.currentperson))]),e._v("人")],1),i("v-uni-view",{},[e._v("缺少人数:"),i("v-uni-text",{staticClass:"my-text-box2-t"},[e._v(e._s(e.currentOrder.lackperson))]),e._v("人")],1)],1),i("v-uni-view",{staticClass:"right"},[1==e.currentOrder.isbefore?i("v-uni-view",{},[e._v("最大提前时间:"),i("v-uni-text",{staticClass:"my-text-box2-t"},[e._v(e._s(e.hoursTominute(e.currentOrder.beforetime)))]),e._v("分钟")],1):e._e(),1!=e.currentOrder.isbefore?i("v-uni-view",{},[e._v("最大提前时间:"),i("v-uni-text",{staticClass:"my-text-box2-t"},[e._v("0")]),e._v("分钟")],1):e._e(),1==e.currentOrder.isafter?i("v-uni-view",{},[e._v("最大延后时间:"),i("v-uni-text",{staticClass:"my-text-box2-t"},[e._v(e._s(e.hoursTominute(e.currentOrder.aftertime)))]),e._v("分钟")],1):e._e(),1!=e.currentOrder.isafter?i("v-uni-view",{},[e._v("最大延后时间:"),i("v-uni-text",{staticClass:"my-text-box2-t"},[e._v("0")]),e._v("分钟")],1):e._e()],1)],1),i("uni-section",{attrs:{title:"备注",type:"line",titleFontSize:"36rpx"}}),i("v-uni-view",{staticClass:"my-text-box"},[e._v(e._s(e.currentOrder.remark))])],1),i("v-uni-view",{staticClass:"updateAndDelete"},[i("v-uni-view",{staticClass:"updateAndDelete-item"},[i("v-uni-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"btn-grad-update",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ToUpdateCarOrder.apply(void 0,arguments)}}},[e._v("修改")])],1),i("v-uni-view",{staticClass:"updateAndDelete-item"},[i("v-uni-button",{staticClass:"btn-grad-delete",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteOrder.apply(void 0,arguments)}}},[e._v("删除")])],1)],1)],1)],1)],1),i("uv-popup",{ref:"appraisePopup",attrs:{mode:"center",round:"30rpx",closeable:!0,"close-on-click-overlay":!1},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.emptyApprise.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"appraisePopup-box"},[i("uni-section",{attrs:{title:"输入评价",type:"line",titleFontSize:"36rpx"}}),i("uv-textarea",{attrs:{maxlength:"50",count:!0,placeholder:"请输入内容"},model:{value:e.appriseText,callback:function(t){e.appriseText=t},expression:"appriseText"}}),i("v-uni-button",{staticClass:"btn-grad",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upApprise.apply(void 0,arguments)}}},[e._v("提交评价")])],1)],1),i("quick-message",{ref:"message"}),e.isLoading?i("zero-loading",{attrs:{type:"circle",mask:!0,maskOpacity:"0.1"}}):e._e()],1)},n=[]},"8dea":function(e,t,i){"use strict";i.r(t);var r=i("4f39"),a=i("fc90");for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);i("9da9");var s,o=i("f0c5"),d=Object(o["a"])(a["default"],r["b"],r["c"],!1,null,"b8876348",null,!1,r["a"],s);t["default"]=d.exports},"9da9":function(e,t,i){"use strict";var r=i("4b31"),a=i.n(r);a.a},fc90:function(e,t,i){"use strict";i.r(t);var r=i("0a11"),a=i.n(r);for(var n in r)"default"!==n&&function(e){i.d(t,e,(function(){return r[e]}))}(n);t["default"]=a.a},ff5c:function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.page[data-v-b8876348]{padding-bottom:%?60?%}.updateAndDelete[data-v-b8876348]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-justify-content:space-around;justify-content:space-around}.updateAndDelete .updateAndDelete-item[data-v-b8876348]{width:50%}.updateAndDelete .updateAndDelete-item .btn-grad-delete[data-v-b8876348]{background-image:-webkit-gradient(linear,left top,right top,from(#ff512f),color-stop(51%,#dd2476),to(#ff512f));background-image:-webkit-linear-gradient(left,#ff512f,#dd2476 51%,#ff512f);background-image:linear-gradient(90deg,#ff512f 0,#dd2476 51%,#ff512f);height:%?80?%;line-height:%?80?%;width:%?300?%;text-align:center;text-transform:uppercase;-webkit-transition:.5s;transition:.5s;background-size:200% auto;color:#fff;-webkit-box-shadow:0 0 %?20?% #eee;box-shadow:0 0 %?20?% #eee;border-radius:%?20?%;display:block}.updateAndDelete .updateAndDelete-item .btn-grad-delete[data-v-b8876348]:hover{background-position:100%;color:#fff;text-decoration:none}.updateAndDelete .updateAndDelete-item .btn-grad-update[data-v-b8876348]{background-image:-webkit-gradient(linear,left top,right top,from(#f09819),color-stop(51%,#edde5d),to(#f09819));background-image:-webkit-linear-gradient(left,#f09819,#edde5d 51%,#f09819);background-image:linear-gradient(90deg,#f09819 0,#edde5d 51%,#f09819);height:%?80?%;line-height:%?80?%;width:%?300?%;text-align:center;text-transform:uppercase;-webkit-transition:.5s;transition:.5s;background-size:200% auto;color:#fff;-webkit-box-shadow:0 0 %?20?% #eee;box-shadow:0 0 %?20?% #eee;border-radius:%?20?%;display:block}.updateAndDelete .updateAndDelete-item .btn-grad-update[data-v-b8876348]:hover{background-position:100%;\r\n  /* change the direction of the change here */color:#fff;text-decoration:none}.appraisePopup-box[data-v-b8876348]{width:70vw;height:auto;background-color:#fff;padding:%?20?%}.appraisePopup-box .btn-grad[data-v-b8876348]{background-image:-webkit-gradient(linear,left top,right top,from(#77a1d3),color-stop(51%,#79cbca),to(#77a1d3));background-image:-webkit-linear-gradient(left,#77a1d3,#79cbca 51%,#77a1d3);background-image:linear-gradient(90deg,#77a1d3 0,#79cbca 51%,#77a1d3);margin:10px auto;text-align:center;text-transform:uppercase;-webkit-transition:.5s;transition:.5s;background-size:200% auto;color:#fff;-webkit-box-shadow:0 0 20px #eee;box-shadow:0 0 20px #eee;border-radius:10px;display:block;width:%?450?%;height:%?80?%;line-height:%?80?%}.appraisePopup-box .btn-grad[data-v-b8876348]:hover{background-position:100%;\r\n  /* change the direction of the change here */color:#fff;text-decoration:none}.myicon[data-v-b8876348]{width:%?40?%;height:%?40?%;margin-right:%?30?%}.mycard .my-uv-tags[data-v-b8876348]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?70?%}.mycard .mycard-titile[data-v-b8876348]{font-size:%?38?%;color:#3a3a3a;font-family:Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;font-weight:600}.my-tag[data-v-b8876348]{border-radius:%?10?% 0 0 0;position:absolute;top:0;left:0;width:%?500?%;height:%?50?%;z-index:99;background:#86faf2;background:-webkit-gradient(linear,left top,right top,color-stop(8%,#86faf2),color-stop(49%,#89ffd8),to(rgba(0,212,255,0)));background:-webkit-linear-gradient(left,#86faf2 8%,#89ffd8 49%,rgba(0,212,255,0));background:linear-gradient(90deg,#86faf2 8%,#89ffd8 49%,rgba(0,212,255,0));display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.my-tag uni-text[data-v-b8876348]{margin-left:%?20?%;color:#3a3a3a}.popup-box[data-v-b8876348]{height:62vh;width:100%;padding:%?50?% 0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.popup-box .my-middle-box[data-v-b8876348]{width:100%;border-radius:0}.popup-box .my-middle-box .my-text-box[data-v-b8876348]{background-color:#fff;font-size:%?30?%;padding:%?20?% %?30?%;line-height:%?42?%;color:#3d3d3d}.popup-box .my-middle-box .my-text-box2[data-v-b8876348]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-left:%?30?%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:%?20?%;line-height:%?50?%}.popup-box .my-middle-box .my-text-box2 .my-text-box2-t[data-v-b8876348]{font-weight:700;margin:0 %?10?%}.popup-box .my-middle-box .my-text-box2 .right[data-v-b8876348]{margin-right:%?30?%}.popup-box .top-box[data-v-b8876348]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;width:100%;height:%?170?%;color:#000}.popup-box .top-box .left uni-image[data-v-b8876348]{width:%?120?%;height:%?120?%;border-radius:50%;overflow:hidden}.popup-box .top-box .middle[data-v-b8876348]{font-size:%?36?%;margin-left:%?40?%}.popup-box .top-box .right[data-v-b8876348]{position:absolute;right:%?40?%}.popup-box .top-box .right uni-image[data-v-b8876348]{width:%?120?%;height:%?120?%;overflow:hidden;margin-left:%?10?%;margin-top:%?10?%}.myrelation[data-v-b8876348]{font-size:%?32?%;margin:%?10?% 0}.my-car-box[data-v-b8876348]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.my-car-box .btn-grad[data-v-b8876348]{background-image:-webkit-gradient(linear,left top,right top,from(#77a1d3),color-stop(51%,#79cbca),to(#77a1d3));background-image:-webkit-linear-gradient(left,#77a1d3,#79cbca 51%,#77a1d3);background-image:linear-gradient(90deg,#77a1d3 0,#79cbca 51%,#77a1d3);margin-left:%?10?%;margin-bottom:%?10?%;height:%?60?%;line-height:%?60?%;text-align:center;text-transform:uppercase;-webkit-transition:.5s;transition:.5s;background-size:200% auto;color:#fff;-webkit-box-shadow:0 0 %?20?% #eee;box-shadow:0 0 %?20?% #eee;border-radius:%?10?%;display:block;font-size:%?26?%}.my-car-box .btn-grad[data-v-b8876348]:hover{background-position:100%;color:#fff;text-decoration:none}.my-car-box .car-left[data-v-b8876348]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin:%?15?% 0;font-size:%?32?%}.my-car-box .car-left .my-icon[data-v-b8876348]{width:%?50?%;height:%?50?%;margin-right:%?15?%}.my-car-box .car-right[data-v-b8876348]{margin-right:%?50?%}.my-car-box .car-right uni-image[data-v-b8876348]{width:%?30?%;height:%?30?%;border-radius:50%;overflow:hidden;margin-left:%?10?%;margin-top:%?10?%}',""]),e.exports=t}}]);