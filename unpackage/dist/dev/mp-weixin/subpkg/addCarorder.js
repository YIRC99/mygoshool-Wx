(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpkg/addCarorder"],{195:function(e,n,t){"use strict";(function(e,n){var o=t(4);t(26);o(t(25));var r=o(t(196));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t(1)["default"],t(2)["createPage"])},196:function(e,n,t){"use strict";t.r(n);var o=t(197),r=t(199);for(var s in r)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(s);t(201);var i,c=t(32),u=Object(c["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],i);u.options.__file="subpkg/addCarorder.vue",n["default"]=u.exports},197:function(e,n,t){"use strict";t.r(n);var o=t(198);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},198:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return r})),t.d(n,"staticRenderFns",(function(){return i})),t.d(n,"recyclableRender",(function(){return s})),t.d(n,"components",(function(){return o}));try{o={uniCard:function(){return t.e("uni_modules/uni-card/components/uni-card/uni-card").then(t.bind(null,292))},uLine:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-line/u-line")]).then(t.bind(null,313))},uvDatetimePicker:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uv-datetime-picker/components/uv-datetime-picker/uv-datetime-picker")]).then(t.bind(null,321))},uvPicker:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uv-picker/components/uv-picker/uv-picker")]).then(t.bind(null,328))},uniEasyinput:function(){return t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(t.bind(null,336))},uvCheckboxGroup:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uv-checkbox/components/uv-checkbox-group/uv-checkbox-group")]).then(t.bind(null,343))},uvCheckbox:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uv-checkbox/components/uv-checkbox/uv-checkbox")]).then(t.bind(null,351))},uniSection:function(){return t.e("uni_modules/uni-section/components/uni-section/uni-section").then(t.bind(null,306))},quickMessage:function(){return Promise.all([t.e("common/vendor"),t.e("components/quick-message/quick-message")]).then(t.bind(null,219))},zeroLoading:function(){return t.e("uni_modules/zero-loading/components/zero-loading/zero-loading").then(t.bind(null,240))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,n=e.$createElement,t=(e._self._c,e.ideaText.length);e.$mp.data=Object.assign({},{$root:{g0:t}})},s=!1,i=[];r._withStripped=!0},199:function(e,n,t){"use strict";t.r(n);var o=t(200),r=t.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(s);n["default"]=r.a},200:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={data:function(){return{isLoading:!1,beforeTime:"00:00",isBefore:!1,afterTime:"00:00",isAfter:!1,ideaText:"",columns:[["1","2","3"]],currentPerson:"1",lackPerson:"1",startDateTime:"点击选择出发时间",StartTimeValue:Number(new Date),startAddress:"点击选择出发地点",startAddressAll:"",endAddress:"点击选择目的地",endAddressAll:"",wechatAccount:"",phoneNumber:"",wechatError:!1,phoneError:!1,phoneErrorMessage:"手机号不能为空或格式不正确",wechatErrorMsg:""}},computed:{isValid:function(){return""!==this.wechatAccount||this.isValidPhoneNumber},isTips:function(){return""==this.wechatAccount.trim()&&""==this.phoneNumber.trim()}},watch:{phoneNumber:function(e,n){var t=/^1[3-9]\d{9}$/;this.wechatError||e?t.test(e)?this.phoneError=!1:this.phoneError=!0:this.phoneError=!1},wechatAccount:function(e,n){if(""===this.phoneNumber.trim()){var t=/[\u4e00-\u9fa5]/i.test(e);t?(this.wechatError=!0,this.wechatErrorMsg="微信号不能包含中文字符"):(this.wechatError=!1,this.wechatErrorMsg="")}}},methods:{addOrder:function(){var n=this,t=this.isWrite();if(console.log("isWriteResult",t),t){var o=e.getStorageSync("user");this.isLoading=!0,this.post({url:"carshareorder/add",data:{createuserid:o.openid,startaddressall:this.startAddressAll,startaddress:this.startAddress,endaddressall:this.endAddressAll,endaddress:this.endAddress,startdatetime:this.startDateTime.split(" ")[0]+"T"+this.startDateTime.split(" ")[1],currentperson:this.currentPerson,lackperson:this.lackPerson,phonenumber:this.phoneNumber,wechataccount:this.wechatAccount,isbefore:1==this.isBefore?1:0,beforetime:this.beforeTime,isafter:1==this.isAfter?1:0,aftertime:this.afterTime,remark:this.ideaText}}).then((function(t){n.isLoading=!1,200===t.code?(n.$refs.message.show({type:"success",msg:"发布成功!"}),setTimeout((function(){e.navigateBack()}),1e3)):n.$refs.message.show({type:"error",msg:"发布拼车失败 请稍候重试吧"})}))}},isWrite:function(){return 1==this.isAfter&&"00:00"==this.afterTime?(this.$refs.message.show({type:"warning",msg:"请选择能接受的延后时间范围",customStyle:{color:"#E6A23C",backgroundColor:"rgba(253,246,236)"},iconSize:16}),!1):1==this.isBefore&&"00:00"==this.beforeTime?(this.$refs.message.show({type:"warning",msg:"请选择能接受的提前时间范围",customStyle:{color:"#E6A23C",backgroundColor:"rgba(253,246,236)"},iconSize:16}),!1):""==this.wechatAccount.trim()&&""==this.phoneNumber.trim()?(this.$refs.message.show({type:"warning",msg:"请填写联系方式",customStyle:{color:"#E6A23C",backgroundColor:"rgba(253,246,236)"},iconSize:16}),!1):"点击选择出发时间"==this.startDateTime?(this.$refs.message.show({type:"warning",msg:"请选择出发时间",customStyle:{color:"#E6A23C",backgroundColor:"rgba(253,246,236)"},iconSize:16}),!1):"点击选择目的地"==this.endAddress?(this.$refs.message.show({type:"warning",msg:"请选择目的地",customStyle:{color:"#E6A23C",backgroundColor:"rgba(253,246,236)"},iconSize:16}),!1):"点击选择出发地点"!=this.startAddress||(this.$refs.message.show({type:"warning",msg:"请选择出发地点",customStyle:{color:"#E6A23C",backgroundColor:"rgba(253,246,236)"},iconSize:16,iconColor:""}),!1)},formatter:function(e,n){return"year"===e?"".concat(n,"年"):"month"===e?"".concat(n,"月"):"day"===e?"".concat(n,"日"):"hour"===e?"".concat(n,"时"):"minute"===e?"".concat(n,"分"):n},choseEndAddress:function(){var n=this;e.chooseLocation({success:function(e){n.endAddress=e.name,n.endAddressAll=e.address+e.name},fail:function(){e.getSetting({success:function(n){console.log(n);var t=n.authSetting;t["scope.userLocation"]||e.showModal({title:"是否授权当前位置",content:"需要获取您的地理位置，请确认授权，否则地图功能将无法使用",success:function(n){n.confirm&&e.openSetting({success:function(n){!0===n.authSetting["scope.userLocation"]?(e.showToast({title:"授权成功",icon:"success",duration:1e3}),e.chooseLocation({success:function(e){console.log("详细地址",e)}})):e.showToast({title:"授权失败",icon:"none",duration:1e3})}})}})},fail:function(n){e.showToast({title:"调用授权窗口失败",icon:"none",duration:1e3})}})}})},choseStartAddress:function(){var n=this;e.chooseLocation({success:function(e){n.startAddress=e.name,n.startAddressAll=e.address+e.name},fail:function(){e.getSetting({success:function(n){console.log(n);var t=n.authSetting;t["scope.userLocation"]||e.showModal({title:"是否授权当前位置",content:"需要获取您的地理位置，请确认授权，否则地图功能将无法使用",success:function(n){n.confirm&&e.openSetting({success:function(n){!0===n.authSetting["scope.userLocation"]?(e.showToast({title:"授权成功",icon:"success",duration:1e3}),e.chooseLocation({success:function(e){console.log("详细地址",e)}})):e.showToast({title:"授权失败",icon:"none",duration:1e3})}})}})},fail:function(n){e.showToast({title:"调用授权窗口失败",icon:"none",duration:1e3})}})}})},startConfirm:function(e){console.log("开始出发时间",e),console.log("开始出发时间",this.$u.timeFormat(e.value,"yyyy-mm-dd hh:MM")),this.startDateTime=this.$u.timeFormat(e.value,"yyyy-mm-dd hh:MM")},choseStartDateTime:function(){this.$refs.startDatetimePicker.open()},lackConfirm:function(e){console.log("缺少人数",e.value[0]),this.lackPerson=e.value[0]},CurrentConfirm:function(e){console.log("当前人数",e.value[0]),this.currentPerson=e.value[0]},choseCurrentPerson:function(){this.$refs.CurrentPicker.open()},choseLaskPerson:function(){this.$refs.lackPicker.open()},afterConfirm:function(e){console.log(e),this.afterTime=e.value},beforConfirm:function(e){console.log(e),this.beforeTime=e.value},openBeforDatetimePicker:function(){this.isBefore&&this.$refs.beforDatetimePicker.open()},openAfterDatetimePicker:function(){this.isAfter&&this.$refs.afterDatetimePicker.open()},tiqianChange:function(e){console.log("能否接受提前出发：",e),this.isBefore=e},yanhoChange:function(e){console.log("能否接受延后出发：",e),this.isAfter=e}}};n.default=t}).call(this,t(2)["default"])},201:function(e,n,t){"use strict";t.r(n);var o=t(202),r=t.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(s);n["default"]=r.a},202:function(e,n,t){}},[[195,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/subpkg/addCarorder.js.map