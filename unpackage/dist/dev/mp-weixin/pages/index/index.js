(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{159:function(e,n,t){"use strict";(function(e,n){var o=t(4);t(26);o(t(25));var r=o(t(160));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t(1)["default"],t(2)["createPage"])},160:function(e,n,t){"use strict";t.r(n);var o=t(161),r=t(163);for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t(183);var s,u=t(32),c=Object(u["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],s);c.options.__file="pages/index/index.vue",n["default"]=c.exports},161:function(e,n,t){"use strict";t.r(n);var o=t(162);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},162:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return r})),t.d(n,"staticRenderFns",(function(){return s})),t.d(n,"recyclableRender",(function(){return i})),t.d(n,"components",(function(){return o}));var r=function(){var e=this,n=e.$createElement;e._self._c},i=!1,s=[];r._withStripped=!0},163:function(e,n,t){"use strict";t.r(n);var o=t(164),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},164:function(e,n,t){"use strict";(function(e){var o=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t(165)),i=o(t(174)),s=function(){t.e("uni_modules/jorbin-MagicNavigationBar/components/jorbin-MagicNavigationBar/jorbin-MagicNavigationBar").then(function(){return resolve(t(226))}.bind(null,t)).catch(t.oe)},u={components:{MagicNavigationBar:s,my:r.default,home:i.default},data:function(){return{tabIndex:0,items:[{icon:{src:t(181),width:30,height:30},text:"拼车广场"},{icon:{src:t(182),width:30,height:30},text:"个人中心"}]}},methods:{onTab:function(n,t){this.tabIndex=n,1==n?(e.setNavigationBarTitle({title:"我的"}),this.$refs.mypage.myonshow()):0==n&&(e.setNavigationBarTitle({title:"拼车广场"}),this.$refs.homepage.myonshow()),console.log("tabIndex",n)}},mounted:function(){},onShow:function(){console.log("index页面触发了onshow 当前的页面下标是",this.tabIndex),this.onTab(this.tabIndex,{})}};n.default=u}).call(this,t(2)["default"])},165:function(e,n,t){"use strict";t.r(n);var o=t(166),r=t(168);for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t(170),t(172);var s,u=t(32),c=Object(u["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],s);c.options.__file="pages/my/login.vue",n["default"]=c.exports},166:function(e,n,t){"use strict";t.r(n);var o=t(167);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},167:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return r})),t.d(n,"staticRenderFns",(function(){return s})),t.d(n,"recyclableRender",(function(){return i})),t.d(n,"components",(function(){return o}));try{o={mylist:function(){return t.e("components/mylist/mylist").then(t.bind(null,233))},zeroLoading:function(){return t.e("uni_modules/zero-loading/components/zero-loading/zero-loading").then(t.bind(null,240))},uvToast:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uv-toast/components/uv-toast/uv-toast")]).then(t.bind(null,247))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,n=e.$createElement;e._self._c},i=!1,s=[];r._withStripped=!0},168:function(e,n,t){"use strict";t.r(n);var o=t(169),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},169:function(e,n,t){"use strict";(function(e,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){t.e("components/mylist/mylist").then(function(){return resolve(t(233))}.bind(null,t)).catch(t.oe)},i={components:{mylist:r},data:function(){return{isLogin:!1,info:{},isLoading:!1,avahttp:this.avahttp}},methods:{toInfo:function(){this.isLogin&&e.navigateTo({url:"/subpkg/myinfo"})},mychooseavatar:function(e){console.log(e)},getuserphone:function(e){console.log(e)},toFeedback:function(){e.navigateTo({url:"/subpkg/feedback"})},toOrder:function(){console.log("1111"),e.navigateTo({url:"/pages/my/order",success:function(e){},fail:function(){},complete:function(){}})},myonshow:function(){console.log("my login 页面的show 触发了");var n=e.getStorageSync("token");this.isLogin=void 0!=n&&null!=n&&""!=n,this.info=e.getStorageSync("user")},WxLoginSuccess:function(){this.isLoading=!1,this.isLogin=!0,e.setStorageSync("token",this.info.openid),e.setStorageSync("user",this.info),this.$refs.toast.show({type:"success",message:"登录成功",duration:1500})},WxLoginFail:function(){this.isLoading=!1,this.$refs.toast.show({type:"error",message:"登录失败,请稍重试",duration:1500})},wxLogin:function(){var e=this;this.isLoading=!0,console.log("调用了微信登录"),console.log(this.avahttp+"1.jpg"),o.login({success:function(n){e.post({url:"user/login?code=".concat(n.code)}).then((function(n){console.log(n),200==n.code?(e.info=n.data,e.WxLoginSuccess()):e.WxLoginFail()}))},fail:function(e){console.log("调用微信登录失败",e)}})}},mounted:function(){}};n.default=i}).call(this,t(2)["default"],t(1)["default"])},170:function(e,n,t){"use strict";t.r(n);var o=t(171),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},171:function(e,n,t){},172:function(e,n,t){"use strict";t.r(n);var o=t(173),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},173:function(e,n,t){},174:function(e,n,t){"use strict";t.r(n);var o=t(175),r=t(177);for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t(179);var s,u=t(32),c=Object(u["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],s);c.options.__file="pages/home/home.vue",n["default"]=c.exports},175:function(e,n,t){"use strict";t.r(n);var o=t(176);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},176:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return r})),t.d(n,"staticRenderFns",(function(){return s})),t.d(n,"recyclableRender",(function(){return i})),t.d(n,"components",(function(){return o}));try{o={uTabs:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-tabs/u-tabs")]).then(t.bind(null,263))},uvCalendars:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uv-calendars/components/uv-calendars/uv-calendars")]).then(t.bind(null,271))},uEmpty:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-empty/u-empty")]).then(t.bind(null,284))},uniCard:function(){return t.e("uni_modules/uni-card/components/uni-card/uni-card").then(t.bind(null,292))},uvPopup:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uv-popup/components/uv-popup/uv-popup")]).then(t.bind(null,299))},uniSection:function(){return t.e("uni_modules/uni-section/components/uni-section/uni-section").then(t.bind(null,306))},quickMessage:function(){return Promise.all([t.e("common/vendor"),t.e("components/quick-message/quick-message")]).then(t.bind(null,219))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,n=e.$createElement,t=(e._self._c,e.newSchoolList.length),o=e.__map(e.newSchoolList,(function(n,t){var o=e.__get_orig(n),r=e.subYear(n.startdatetime);return{$orig:o,m0:r}})),r=e.oldSchoolList.length,i=e.__map(e.oldSchoolList,(function(n,t){var o=e.__get_orig(n),r=e.subYear(n.startdatetime);return{$orig:o,m1:r}})),s=e.otherAddressList.length,u=e.__map(e.otherAddressList,(function(n,t){var o=e.__get_orig(n),r=e.subYear(n.startdatetime);return{$orig:o,m2:r}})),c=1==e.currentOrder.isbefore?e.hoursTominute(e.currentOrder.beforetime):null,a=1==e.currentOrder.isafter?e.hoursTominute(e.currentOrder.aftertime):null;e.$mp.data=Object.assign({},{$root:{g0:t,l0:o,g1:r,l1:i,g2:s,l2:u,m3:c,m4:a}})},i=!1,s=[];r._withStripped=!0},177:function(e,n,t){"use strict";t.r(n);var o=t(178),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},178:function(e,n,t){"use strict";(function(e){var o=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t(18)),i={data:function(){return{avahttp:this.avahttp,oneRefresh:!1,isRefresh:!1,popupShow:!1,noticeText:"编译成功。前端运行日志，请另行在小程序开发工具的控制台查看。编译成功。前端运行日志，请另行在小程序开发工具的控制台查看。编译成功。前端运行日志，请另行在小程序开发工具的控制台查看。编译成功。前端运行日志，请另行在小程序开发工具的控制台查看。编译成功。前端运行日志，请另行在小程序开发工具的控制台查看。编译成功。前端运行日志，请另行在小程序开发工具的控制台查看。编译成功。前端运行日志，请另行在小程序开发工具的控制台查看。编译成功。前端运行日志，请另行在小程序开发工具的控制台查看。编译成功。前端运行日志，请另行在小程序开发工具的控制台查看。",list:[{name:"濂溪校区",time:"",pageNum:1,pagetotal:0},{name:"鹤问湖校区",time:"",pageNum:1,pagetotal:0},{name:"其他",time:"",pageNum:1,pagetotal:0}],currentIndex:0,orderList:[],newSchoolList:[],oldSchoolList:[],otherAddressList:[],currentOrder:{createUserInfo:{username:""}},pageNum:1,pageSize:5,pagetotal:0}},methods:{chooseDateConfirm:function(e){console.log(e.fulldate),this.list[this.currentIndex].time=e.fulldate,this.scrollPullDown()},cancelCalendars:function(){this.list[this.currentIndex].time="",this.scrollPullDown()},openCalendars:function(){this.$refs.calendars.open()},copyWx:function(){var n=this;e.setClipboardData({data:this.currentOrder.userWx,complete:function(e){n.$refs.receivePopup.close(),n.closeReceivePopup()}})},closeReceivePopup:function(){this.popupShow=!1,console.log(this.popupShow)},receiveOrder:function(){this.$refs.popup.close(),this.$refs.receivePopup.open()},getOrderList:function(){var e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n&&(this.list[this.currentIndex].pageNum=1),this.post({url:"carshareorder/page",data:{pageNum:this.list[this.currentIndex].pageNum,pageSize:this.pageSize,pageDate:this.list[this.currentIndex].time,startAddName:this.list[this.currentIndex].name}}).then((function(t){if(console.log(t.data),200!=t.code)return e.isRefresh=!1,void e.$refs.message.show({type:"error",msg:"网络开了点小差,请稍候重试吧",iconSize:16});e.list[e.currentIndex].pagetotal=t.data.total,t.data.records.forEach((function(e){(-1!=e.startaddressall.indexOf("濂溪校区")||-1!=e.startaddressall.indexOf("鹤问湖校区"))&&(e.startaddress="九职大"+e.startaddress.slice(6,9999))})),n?0==e.currentIndex?(e.newSchoolList=[],e.newSchoolList=t.data.records):1==e.currentIndex?(e.oldSchoolList=[],e.oldSchoolList=t.data.records):2==e.currentIndex&&(e.otherAddressList=[],e.otherAddressList=t.data.records):(console.log("获取信息是的方式是触底分页加载"),0==e.currentIndex?e.newSchoolList=[].concat((0,r.default)(e.newSchoolList),(0,r.default)(t.data.records)):1==e.currentIndex?e.oldSchoolList=[].concat((0,r.default)(e.oldSchoolList),(0,r.default)(t.data.records)):2==e.currentIndex&&(e.otherAddressList=[].concat((0,r.default)(e.otherAddressList),(0,r.default)(t.data.records)))),e.isRefresh=!1,console.log("下拉刷新结束了")})).catch((function(n){console.log("home page is",n),e.isRefresh=!1,e.$refs.message.show({type:"error",msg:"网络开了点小差,请稍候重试吧",iconSize:16})}))},scrollPullDown:function(){console.log("下拉刷新了"),1!=this.isRefresh&&(this.isRefresh=!0,this.getOrderList())},scrollDown:function(){console.log("滚动条到了底部 当前的indedx为",this.currentIndex),0==this.currentIndex&&this.newSchoolList.length>=this.list[this.currentIndex].pagetotal?this.$refs.message.show({type:"default",msg:"已经到底了, 没有更多数据啦",iconSize:16}):1==this.currentIndex&&this.oldSchoolList.length>=this.list[this.currentIndex].pagetotal||2==this.currentIndex&&this.otherAddressList.length>=this.list[this.currentIndex].pagetotal?this.$refs.message.show({type:"success",msg:"已经到底了, 没有更多数据啦",iconSize:16}):(this.list[this.currentIndex].pageNum++,this.getOrderList(!1))},toAddOrder:function(){e.navigateTo({url:"/subpkg/addCarorder"})},clickCard:function(e){this.currentOrder=e,console.log(this.currentOrder),this.$refs.popup.open(),this.popupShow=!0},closePopup:function(){this.popupShow=!1},change:function(e){if(this.currentIndex=e.index,0==this.currentIndex){if(0!==this.newSchoolList.length)return;this.scrollPullDown()}else if(1==this.currentIndex){if(0!==this.oldSchoolList.length)return;this.scrollPullDown()}else if(2==this.currentIndex){if(0!==this.otherAddressList.length)return;this.scrollPullDown()}},myonshow:function(){console.log("拼车页面的myonshow方法触发了"),this.simulateSwipeDown()},simulateSwipeDown:function(){this.oneRefresh||(this.oneRefresh=!0,console.log("首次进入页面 index 0 页面 自动下拉刷新"),this.change({index:0,name:"濂溪校区"}))}}};n.default=i}).call(this,t(2)["default"])},179:function(e,n,t){"use strict";t.r(n);var o=t(180),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},180:function(e,n,t){},183:function(e,n,t){"use strict";t.r(n);var o=t(184),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},184:function(e,n,t){}},[[159,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/index/index.js.map